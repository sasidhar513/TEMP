#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
using namespace std;


int main() {
    int l,b,n;
    cin>>l>>b>>n;
    int  arr[l][b],cp[l][b];
    for(int i=0;i<l;i++)
        for(int j=0;j<b;j++)
        {
            char temp;
            cin>>temp;
            if(temp=='O')
            {
                arr[i][j]=2;
                cp[i][j]=2;
            }
            else
            {
                arr[i][j]=0;
                cp[i][j]=0;
            }
        }
   
    for(int m=1;m<15;m++)
    {
        /*if(i%3==0)
            {
            for(int i=0;i<l;i++)
                for(int j=0;j<b;j++)
                {
                    if(arr[i][j]>1)
                        arr[i][j]--;
                    else if(arr[i][j]==1)
                    {
                        arr[i+1][j]=0;
                        arr[i-1][j]=0;
                        arr[i][j]=0;
                        arr[i][j+1]=0;
                        arr[i][j-1]=0;
                    }
                }
        }*/
         if((m%2)==1)
        {                cout<<endl;
    
            for(int i=0;i<l;i++)
                for(int j=0;j<b;j++)
                {  
                    if(arr[i][j]==0)
                        arr[i][j]=3;
                    else if(arr[i][j]>1)
                        arr[i][j]--;
                    else if(arr[i][j]==1)
                    {
                        arr[i+1][j]=0;
                        arr[i-1][j]=0;
                        arr[i][j]=0;
                        arr[i][j+1]=0;
                        arr[i][j-1]=0;
                    }
                    
                }
        }        
        else if((m%2)==0)
        {
             for(int i=0;i<l;i++)
                for(int j=0;j<b;j++)
                {                 
                    if(arr[i][j]>1)
                        arr[i][j]--;
                    else if(arr[i][j]==1)
                    {
                        if(arr[i+1][j]!=1&&i+1<l)
                            arr[i+1][j]=0;
                        if(arr[i-1][j]!=1&&i-1>=0)
                            arr[i-1][j]=0;
                            arr[i][j]=0;
                        if(arr[i][j+1]!=1&&j+1<b)
                            arr[i][j+1]=0;
                        if(arr[i][j-1]!=1&&j-1>=0)
                            arr[i][j-1]=0; 
                    }                 
                }
        }        
        for(int i=0;i<l;i++)
        {
             for(int j=0;j<b;j++)            
                 cout<<arr[i][j];
            cout<<endl;
        }
        cout<<endl;
        cout<<endl;
        bool equal=true;
        for(int i=0;i<l;i++)
            for(int j=0;j<b;j++)
                if(arr[i][j]!=cp[i][j])
                {
                    equal=false;
                    break;
                }
        if(equal)
            cout<<"equal "<<m<<endl;
        }
  
    
    return 0;
}
